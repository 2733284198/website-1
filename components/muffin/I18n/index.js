define("components/muffin/I18n/index",[],function(t,e,i){var o,n,s=[].indexOf||function(t){for(var e=0,i=this.length;e<i;e++)if(e in this&&this[e]===t)return e;return-1};n=function(t,e){var i,o;for(i in t){o=t[i];if("object"===typeof o){null==e[i]&&(e[i]={});n(e[i],o)}else e[i]=o}return e};o=function(){function e(){this.locale=null;this.defaultLocale=null;this.supportedLocales=[];this.mapping={}}e.prototype.getBrowserLocale=function(){var t;if(navigator){t=navigator.language||navigator.browserLanguage||navigator.systemLanguage||navigator.userLanguage;t&&(t=t.replace("_","-").replace(/\W/,"-").toLowerCase())}null==t&&(t="en");return t};e.prototype.pathForLocale=function(t){return"strings/"+t+"/str"};e.prototype.setLocale=function(e,i){var o,n,r,a,l,p,u,h=this;l=[];if(this.defaultLocale){a=this.pathForLocale(this.defaultLocale);l.push(a)}if(this.supportedLocales.length>0){r=e.split("-");for(n=p=0,u=r.length;0<=u?p<u:p>u;n=0<=u?++p:--p){o=r.slice(0,+n+1||9e9).join("-");if(s.call(this.supportedLocales,o)>=0){this.locale=o;a=this.pathForLocale(o);s.call(l,a)<0&&l.push(a)}}}else{this.locale=e;a=this.pathForLocale(e);l.push(a)}if(0===l.length){this.locale="en";l.push(this.pathForLocale("en"))}return t(l,function(){var e,o,n;h.clear();for(o=0,n=l.length;o<n;o++){a=l[o];e=t(a);h.register(e)}return i()})};e.prototype.register=function(t){return n(t,this.mapping)};e.prototype.clear=function(){return this.mapping={}};e.prototype.t=function(t,e){var i;null==e&&(e={});i=this.mapping;_(t.split(".")).each(function(t){return i=i[t]});if(null!=i)return _.template(i)(e);console.error("Can't find '"+t+"' in the strings file.");return void 0};return e}();i.exports=new o});