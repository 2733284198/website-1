define("components/muffin/I18n/index",[],function(t,e,i){var n,o,r=[].indexOf||function(t){for(var e=0,i=this.length;e<i;e++)if(e in this&&this[e]===t)return e;return-1};o=function(t,e){var i,n;for(i in t){n=t[i];if("object"===typeof n){null==e[i]&&(e[i]={});o(e[i],n)}else e[i]=n}return e};n=function(){function e(){this.locale=null;this.defaultLocale=null;this.supportedLocales=[];this.mapping={}}e.prototype.getBrowserLocale=function(){var t;if(navigator){t=navigator.language||navigator.browserLanguage||navigator.systemLanguage||navigator.userLanguage;t&&(t=t.replace("_","-").replace(/\W/,"-").toLowerCase())}null==t&&(t="en");return t};e.prototype.pathForLocale=function(t){return"strings/"+t+"/str"};e.prototype.setLocale=function(e,i){var n,o,s,a,l,p,u,h=this;l=[];if(this.defaultLocale){a=this.pathForLocale(this.defaultLocale);l.push(a)}if(this.supportedLocales.length>0){s=e.split("-");for(o=p=0,u=s.length;0<=u?p<u:p>u;o=0<=u?++p:--p){n=s.slice(0,+o+1||9e9).join("-");if(r.call(this.supportedLocales,n)>=0){this.locale=n;a=this.pathForLocale(n);r.call(l,a)<0&&l.push(a)}}}else{this.locale=e;a=this.pathForLocale(e);l.push(a)}if(0===l.length){this.locale="en";l.push(this.pathForLocale("en"))}return t(l,function(){var e,n,o;h.clear();for(n=0,o=l.length;n<o;n++){a=l[n];e=t(a);h.register(e)}return i()})};e.prototype.register=function(t){return o(t,this.mapping)};e.prototype.clear=function(){return this.mapping={}};e.prototype.t=function(t,e){var i;null==e&&(e={});i=this.mapping;_(t.split(".")).each(function(t){return i=i[t]});if(null!=i)return _.template(i)(e);console.error("Can't find '"+t+"' in the strings file.");return void 0};return e}();i.exports=new n});