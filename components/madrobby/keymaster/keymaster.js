define("components/madrobby/keymaster/keymaster",[],function(t,e,n){(function(t){function e(t,e){for(var n=t.length;n--;)if(t[n]===e)return n;return-1}function o(t,e){if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function i(t){for(w in x)x[w]=t[_[w]]}function s(t){var n,o,s,r,a,p;n=t.keyCode;-1==e(P,n)&&P.push(n);(93==n||224==n)&&(n=91);if(n in x){x[n]=!0;for(s in k)k[s]==n&&(l[s]=!0)}else{i(t);if(l.filter.call(this,t)&&n in $){p=d();for(r=0;r<$[n].length;r++){o=$[n][r];if(o.scope==p||"all"==o.scope){a=o.mods.length>0;for(s in x)(!x[s]&&e(o.mods,+s)>-1||x[s]&&-1==e(o.mods,+s))&&(a=!1);if((0==o.mods.length&&!x[16]&&!x[18]&&!x[17]&&!x[91]||a)&&o.method(t,o)===!1){t.preventDefault?t.preventDefault():t.returnValue=!1;t.stopPropagation&&t.stopPropagation();t.cancelBubble&&(t.cancelBubble=!0)}}}}}}function r(t){var n,o=t.keyCode,i=e(P,o);i>=0&&P.splice(i,1);(93==o||224==o)&&(o=91);if(o in x){x[o]=!1;for(n in k)k[n]==o&&(l[n]=!1)}}function a(){for(w in x)x[w]=!1;for(w in k)l[w]=!1}function l(t,e,n){var o,i;o=v(t);if(void 0===n){n=e;e="all"}for(var s=0;s<o.length;s++){i=[];t=o[s].split("+");if(t.length>1){i=g(t);t=[t[t.length-1]]}t=t[0];t=E(t);t in $||($[t]=[]);$[t].push({shortcut:o[s],scope:e,method:n,key:o[s],mods:i})}}function p(t,e){var n,i,s,r,a,l=[];n=v(t);for(r=0;r<n.length;r++){i=n[r].split("+");i.length>1&&(l=g(i));t=i[i.length-1];t=E(t);void 0===e&&(e=d());if(!$[t])return;for(s=0;s<$[t].length;s++){a=$[t][s];a.scope===e&&o(a.mods,l)&&($[t][s]={})}}}function c(t){"string"==typeof t&&(t=E(t));return-1!=e(P,t)}function h(){return P.slice(0)}function u(t){var e=(t.target||t.srcElement).tagName;return!("INPUT"==e||"SELECT"==e||"TEXTAREA"==e)}function f(t){C=t||"all"}function d(){return C||"all"}function m(t){var e,n,o;for(e in $){n=$[e];for(o=0;o<n.length;)n[o].scope===t?n.splice(o,1):o++}}function v(t){var e;t=t.replace(/\s/g,"");e=t.split(",");""==e[e.length-1]&&(e[e.length-2]+=",");return e}function g(t){for(var e=t.slice(0,t.length-1),n=0;n<e.length;n++)e[n]=k[e[n]];return e}function y(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent&&t.attachEvent("on"+e,function(){n(window.event)})}function b(){var e=t.key;t.key=j;return e}var w,$={},x={16:!1,18:!1,17:!1,91:!1},C="all",k={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,command:91},T={backspace:8,tab:9,clear:12,enter:13,"return":13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,"delete":46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},E=function(t){return T[t]||t.toUpperCase().charCodeAt(0)},P=[];for(w=1;w<20;w++)T["f"+w]=111+w;var _={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};for(w in k)l[w]=!1;y(document,"keydown",function(t){s(t)});y(document,"keyup",r);y(window,"focus",a);var j=t.key;t.key=l;t.key.setScope=f;t.key.getScope=d;t.key.deleteScope=m;t.key.filter=u;t.key.isPressed=c;t.key.getPressedKeyCodes=h;t.key.noConflict=b;t.key.unbind=p;"undefined"!==typeof n&&(n.exports=l)})(this)});