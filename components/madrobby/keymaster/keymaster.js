define("components/madrobby/keymaster/keymaster",[],function(t,e,n){(function(t){function e(t,e){for(var n=t.length;n--;)if(t[n]===e)return n;return-1}function i(t,e){if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function o(t){for(w in C)C[w]=t[j[w]]}function s(t){var n,i,s,r,a,c;n=t.keyCode;-1==e(S,n)&&S.push(n);(93==n||224==n)&&(n=91);if(n in C){C[n]=!0;for(s in k)k[s]==n&&(l[s]=!0)}else{o(t);if(l.filter.call(this,t)&&n in $){c=d();for(r=0;r<$[n].length;r++){i=$[n][r];if(i.scope==c||"all"==i.scope){a=i.mods.length>0;for(s in C)(!C[s]&&e(i.mods,+s)>-1||C[s]&&-1==e(i.mods,+s))&&(a=!1);if((0==i.mods.length&&!C[16]&&!C[18]&&!C[17]&&!C[91]||a)&&i.method(t,i)===!1){t.preventDefault?t.preventDefault():t.returnValue=!1;t.stopPropagation&&t.stopPropagation();t.cancelBubble&&(t.cancelBubble=!0)}}}}}}function r(t){var n,i=t.keyCode,o=e(S,i);o>=0&&S.splice(o,1);(93==i||224==i)&&(i=91);if(i in C){C[i]=!1;for(n in k)k[n]==i&&(l[n]=!1)}}function a(){for(w in C)C[w]=!1;for(w in k)l[w]=!1}function l(t,e,n){var i,o;i=v(t);if(void 0===n){n=e;e="all"}for(var s=0;s<i.length;s++){o=[];t=i[s].split("+");if(t.length>1){o=g(t);t=[t[t.length-1]]}t=t[0];t=E(t);t in $||($[t]=[]);$[t].push({shortcut:i[s],scope:e,method:n,key:i[s],mods:o})}}function c(t,e){var n,o,s,r,a,l=[];n=v(t);for(r=0;r<n.length;r++){o=n[r].split("+");o.length>1&&(l=g(o));t=o[o.length-1];t=E(t);void 0===e&&(e=d());if(!$[t])return;for(s=0;s<$[t].length;s++){a=$[t][s];a.scope===e&&i(a.mods,l)&&($[t][s]={})}}}function p(t){"string"==typeof t&&(t=E(t));return-1!=e(S,t)}function h(){return S.slice(0)}function u(t){var e=(t.target||t.srcElement).tagName;return!("INPUT"==e||"SELECT"==e||"TEXTAREA"==e)}function f(t){x=t||"all"}function d(){return x||"all"}function m(t){var e,n,i;for(e in $){n=$[e];for(i=0;i<n.length;)n[i].scope===t?n.splice(i,1):i++}}function v(t){var e;t=t.replace(/\s/g,"");e=t.split(",");""==e[e.length-1]&&(e[e.length-2]+=",");return e}function g(t){for(var e=t.slice(0,t.length-1),n=0;n<e.length;n++)e[n]=k[e[n]];return e}function y(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent&&t.attachEvent("on"+e,function(){n(window.event)})}function b(){var e=t.key;t.key=D;return e}var w,$={},C={16:!1,18:!1,17:!1,91:!1},x="all",k={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,command:91},T={backspace:8,tab:9,clear:12,enter:13,"return":13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,"delete":46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},E=function(t){return T[t]||t.toUpperCase().charCodeAt(0)},S=[];for(w=1;w<20;w++)T["f"+w]=111+w;var j={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};for(w in k)l[w]=!1;y(document,"keydown",function(t){s(t)});y(document,"keyup",r);y(window,"focus",a);var D=t.key;t.key=l;t.key.setScope=f;t.key.getScope=d;t.key.deleteScope=m;t.key.filter=u;t.key.isPressed=p;t.key.getPressedKeyCodes=h;t.key.noConflict=b;t.key.unbind=c;"undefined"!==typeof n&&(n.exports=l)})(this)});